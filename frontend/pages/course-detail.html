<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程详情 - DuckStudy</title>
    <link rel="icon" type="image/x-icon" href="../images/duckstudy.ico">
    <link href="../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../lib/bootstrap-icons/css/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/courses.css">
    <link rel="stylesheet" href="../css/course-detail.css">
</head>
<body>
    <div class="container-fluid main-container">
        <!-- 顶部导航栏 -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="../index.html">
                    <img src="../images/duckstudy.png" alt="DuckStudy Logo">
                    <span>DuckStudy</span>
                </a>
                <div class="d-flex align-items-center">
                    <div class="nav-links">
                        <a href="platforms.html" class="nav-link">导航</a>
                        <a href="posts.html" class="nav-link">论坛</a>
                        <a href="market.html" class="nav-link">市场</a>
                        <a href="courses.html" class="nav-link active">课程</a>
                        <a href="projects.html" class="nav-link">热门项目</a>
                    </div>
                    <div class="search-box">
                        <input type="text" placeholder="搜索...">
                        <i class="bi bi-search"></i>
                    </div>
                    <div class="user-section">
                        <div id="userSection">
                            <!-- 用户登录状态将通过JavaScript动态加载 -->
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="main-content">
            <!-- 课程详情页内容 -->
            <div class="back-link">
                <a href="courses.html"><i class="bi bi-arrow-left"></i> 返回课程列表</a>
            </div>
            
            <!-- 课程基本信息 -->
            <div class="course-detail-container" id="courseDetailContainer">
                <div class="course-header">
                    <div class="course-title-section">
                        <h1 id="courseTitle">课程标题加载中...</h1>
                        <div class="course-meta">
                            <div class="rating">
                                <div class="stars" id="courseRating">
                                    <!-- 星级评分将通过JavaScript动态加载 -->
                                </div>
                                <span class="rating-score" id="ratingScore">0.0</span>
                                <span class="reviews-count">(<span id="reviewsCount">0</span>条评价)</span>
                            </div>
                        </div>
                    </div>
                    <div class="course-actions">
                        <button class="btn btn-outline-primary" id="favoriteBtn">
                            <i class="bi bi-star"></i> 收藏
                        </button>
                        <button class="btn btn-outline-secondary" id="shareBtn">
                            <i class="bi bi-share"></i> 分享
                        </button>
                    </div>
                </div>

                <div class="course-info-card">
                    <div class="course-info-grid">
                        <div class="info-item">
                            <div class="info-label">教师</div>
                            <div class="info-value" id="courseTeacher">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">校区</div>
                            <div class="info-value" id="courseCampus">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">课程类别</div>
                            <div class="info-value" id="courseCategory">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">开课学院</div>
                            <div class="info-value" id="courseDepartment">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">学时</div>
                            <div class="info-value" id="courseHours">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">学分</div>
                            <div class="info-value" id="courseCredits">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">开课学期</div>
                            <div class="info-value" id="courseSemester">加载中...</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">上课地点</div>
                            <div class="info-value" id="courseLocation">加载中...</div>
                        </div>
                    </div>
                </div>

                <div class="course-description">
                    <h3>课程描述</h3>
                    <div id="courseDescription">加载中...</div>
                </div>
            </div>

            <!-- 课程评价 -->
            <div class="course-reviews-section">
                <div class="reviews-header">
                    <h2>课程评价</h2>
                    <button class="btn btn-primary" id="addReviewBtn">
                        <i class="bi bi-pencil"></i> 写评价
                    </button>
                </div>

                <div class="reviews-stats">
                    <div class="overall-rating">
                        <div class="big-score" id="bigRatingScore">0.0</div>
                        <div class="big-stars" id="bigStars"></div>
                        <div class="reviews-count"><span id="totalReviewCount">0</span>条评价</div>
                    </div>
                    <div class="rating-bars">
                        <div class="rating-bar-item">
                            <div class="rating-label">5星</div>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar-item">
                            <div class="rating-label">4星</div>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar-item">
                            <div class="rating-label">3星</div>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar-item">
                            <div class="rating-label">2星</div>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar-item">
                            <div class="rating-label">1星</div>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                    </div>
                </div>

                <div class="reviews-list" id="reviewsList">
                    <!-- 评价列表将通过JavaScript动态加载 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 添加评价模态框 -->
    <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewModalLabel">写课程评价</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <div class="mb-3">
                            <label for="reviewCourseTitle" class="form-label">课程名称</label>
                            <input type="text" class="form-control" id="reviewCourseTitle" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="reviewRating" class="form-label">评分</label>
                            <div class="star-rating">
                                <i class="bi bi-star rating-star" data-rating="1"></i>
                                <i class="bi bi-star rating-star" data-rating="2"></i>
                                <i class="bi bi-star rating-star" data-rating="3"></i>
                                <i class="bi bi-star rating-star" data-rating="4"></i>
                                <i class="bi bi-star rating-star" data-rating="5"></i>
                                <span class="ms-2" id="ratingDisplay">0</span>
                                <input type="hidden" id="reviewRating" name="rating" value="0">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="reviewContent" class="form-label">评价内容</label>
                            <textarea class="form-control" id="reviewContent" rows="5" placeholder="分享你对这门课程的看法、评价或建议..."></textarea>
                            <div class="form-text">评价应客观、真实，请避免使用不当言论</div>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="reviewAnonymous">
                            <label class="form-check-label" for="reviewAnonymous">
                                匿名评价
                            </label>
                        </div>
                        <div class="review-tags mb-3">
                            <label class="form-label">选择标签（可选）</label>
                            <div class="tags-container">
                                <span class="review-tag" data-tag="内容充实">内容充实</span>
                                <span class="review-tag" data-tag="讲解清晰">讲解清晰</span>
                                <span class="review-tag" data-tag="作业适量">作业适量</span>
                                <span class="review-tag" data-tag="考试简单">考试简单</span>
                                <span class="review-tag" data-tag="实用性强">实用性强</span>
                                <span class="review-tag" data-tag="有趣">有趣</span>
                                <span class="review-tag" data-tag="老师负责">老师负责</span>
                                <span class="review-tag" data-tag="推荐">推荐</span>
                            </div>
                            <input type="hidden" id="reviewTags" name="tags" value="">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="submitReviewBtn">提交评价</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/api.js"></script>
    <script type="module" src="../js/course-detail.js"></script>
</body>
</html> 